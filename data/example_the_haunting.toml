# general config file for the project
version="0.0.3"

system="""
You are not an AI Model. You are a narrator of a turn-based role-play game.

GAME:
```
name: Haunted House
theme: Horror
tonality: Psychological Horror
```

CHARACTER:
name: {{character.name}}
age: {{character.age}}
occupation: {{character.occupation}}

- Game is played in chapters. Each chapter has several turns.
- On each turn, you should carefully evaluate my CHARACTER's action to determine the narration. 

- Your should always follow the instructions what player whispers to you."

- There are 6 types of narrations: 
1. Basic narration:
```
narration: ...
```
2. Narration of CHOICES(ALWAYS 4 choices, without skill check):
```
narration: ...
choices: 
1. ...
2. ...
3. ...
```
3. Narration of SKILL_CHECK:
```
narration: ...
skill_check: ... (spot_hidden,lock_picking, stealth, etc)
difficulty: ... (normal, hard or exteme)
```
4. If player enters a BATTLE, you should provide the enemy's name like this:
narration: ...
battle_with: ... (enemy_name)
5. Narration of chapter ENDING:
```
narration: ...
ending: ...
```
6. Narration of GAME OVER:
```
narration: ...
game_over: ...
```

- There are ONLY 3 types of extra information that you can provide to the player at the end of the turn: 
- If a tag needs to be added, you should provide the tag name like this:
```
...
add_tag(or remove_tag): ... (tag name using snake_case)
```

- If an item needs to be added or removed from player's inventory, you should ouput like this:
```
...
add_item(or remove_item): ... (item name using snake_case)
```

- If the background image needs to be different from previous turn, you should ouput at the beginning:
```
background: ... (ONLY the image listed in the BACKGROUNDS)
...
```

- ONLY add/remove items or tags that are exactly required in the RULES.

- The narration should be as short as possible, if it's too long, player will lose interest.

current RULES:
{%- for rule in rules %}
- {{ rule }}
{%- endfor %}

BACKGROUNDS:
{%- for background in backgrounds %}
- {{ background }}
{%- endfor %}
"""

[[list.items]]
name = '0.38 revolver'
id="revolver"
item_type = 'weapon'
requirement ="handgun"
description="A 0.38 revolver with 6 bullets"
[list.items.stats]
attack="1d10"

[[list.items]]
name = 'brawl'
id="brawl"
item_type = 'weapon'
requirement ="brawl"
description="fight with your hands"
[list.items.stats]
attack="1d3+DB"

[[list.items]]
name = 'lucky charm key ring'
id="key ring"
item_type="tool"
description="Luck charm key ring."

[[list.items]]
name = 'a pack of cigarettes'
id="cigarettes"
item_type="tool"
description="a pack of cigarettes"

[[list.items]]
name = 'a cigarette lighter'
id="cigarette lighter"
item_type="tool"
description="cigarette lighter"

[[list.enemies]]
id="dog"
name="Black Dog"
description="A black dog with gray eyes."
[list.enemies.stats]
hp=5
attack=2

[[list.enemies]]
id="flying_bed"
name="flying_bed"
description="A bed flying for no reason."
[list.enemies.stats]
hp=10
attack=3

[[list.enemies]]
id="a floating knife"
name="floating_knife"
description="a knife in the basement"
[list.enemies.stats]
hp=10
attack=3

[[list.backgrounds]]

[character]
name="Harvey Waters"
age = 36
occupation="Private Investigator"
backstory="""
You are a cautious, world-weary skeptic with a rough exterior, distrustful of others and the supernatural, relying on your luck charm key ring during investigations.
"""
items=["cigarettes","cigarette lighter","key ring"]

[character.stats]
STR = 80  
SIZ = 50   
CON = 70   
DEX = 70   
APP = 50   
INT = 50   
POW = 60   
EDU = 40   

HP = 12    
MP = 12
Luck = 50
SAN = 60

MOV = 9
Build = 1
DB = '+1d4'

[character.skills]
photography = 60
disguise = 60
law = 40
library_use = 50
fast_talk = 60
psychology = 60
spot_hidden = 50
handgun = 40
brawl = 70  
credit_rating = 20
dodge = 80
intimidate = 35
Latin = 40
listen = 40
occult = 30
stealth = 40

[[chapters]]
id="r1"
next="{%if 'enter_back_door' in tags%}r2-1{%else%}r2-0{%endif%}"
max_turns=10
backgrounds=[
    "your_office",
    "neighbourhood",
    "police_station",
    "library",
    "asylum",
]
rules=[
    "In the library, player will discover the house was built by a wealthy businessman in 1835, but he died after the house is finished building, the house was then sold to Mr. Walter Corbitt in 1835. A successful 'library_use' or 'spot_hidden' skill check is needed to find out that Mr. Walter Corbitt was not getting along with the neighborhood. He was lawsuit by neighbors due to his will to be buried underneath the house after he died.",

    "To get access to the cases in police station, player needs to persuade Jack, his previous subordinate (needs a 'normal' 'persuade' skill check here).",
    "In police station, player will find out Macario's case. The parents were stabbed by their kid with a fruit knife, 18 wounds in total. When the police arrived, the kid was in extreme thrill.The police shot the Macario kid. When checking his body, they found unusual animal bruise.",

    "In the asylum, player will find Lily Porter, mumbling. When asked about the house, Lily Porter will immediately get scared. After a successful 'normal' 'fast_talk' skill check, she will tell there is a monster in the house, with green eyes. Sometimes, when she wakes up at midnight, it staying besides her bed, staring at her with those eyes. Her husband died shortly after they left the house, the cause of his death is abnormal.",

    "If player checks the neighbourhood, Mr. Dooley, a vendor of cigars and newspapers nearby, will tell you some detailed information about the Macario and Porter families. Player will further know entering the back door is safer (need a 'hard', 'spot hidden' skill, add a 'enter_back_door' tag here if 'spot hidden' skill check succeed)",
    "In this chapter, player will not game over no matter what happens.",
    "Chapter ends when the player decides to go straight to the Haunted House.",
]
initial="""
background: your_office
narration: 
{{character.backstory}}
You are hired by Mr. Knott to investigate his old Boston house. Weird things keep happening to the former tenants. A Macario kid went crazy and killed his parents. The Porter family got a strange disease and were committed to an asylum.

choices:
1. Go to the library, find historical reports.
2. Go to the police station, look into those cases.
3. Go to the asylum, ask Mr & Mrs Porter.
4. Check the neighbourhood.
"""

[[chapters]]
id="r2-1"
next="r3"
max_turns=15
backgrounds=[
    "back_door",
    "kitchen",
    "living_room",
    "study",
    "bathroom",
]
rules=[
    "Player can get inside by a successful 'hard' 'lock_picking' skill check or a successful 'normal' 'spot_hidden' skill check (help the player find a broken window), or a 'normal' 'STR' skill check",
    "If player successfully uses a rock to break in, the noise will attract a black dog. The black dog will come towards the player once getting inside(need a 'extreme' 'dodge' skill check). If player fails at 'dodge' skill check, player will have to fight the dog.",
    "Once player goes inside, player can explore the first floor. The first floor has a living room, a study, a bathroom and a kitchen.",
    "In the living room, player can find Macario's family photo. They smile happily, which makes you hard to imagine why a lovely kid would suddenly kill his parents.",
    "In the bathroom, there's a mysterious sign on the mirror, three Yâ€™s arranged in a triangle and a staring eye in the middle. The moment you see it, you start to have a headache. A successful 'hard' 'occult' skill check will make player know it's related to Immortality.",
    "In the study, it is full of crucifixes and Madonnas. A successful 'normal' 'spot_hidden' skill check will help player find Mr. Corbitt's diary, in which records he was doing some crazy religious experiments. A successful 'normal' 'Latin' skill check helps player learn that the experiement is related to Immorality.",
    "In the kitchen, the water is dripping, but no matter how hard the player tightens the tap, it will not stop leaking.",
    "Player need to do skill check for at least 4 times in this chapter.",
    "In this chapter, player will not game over no matter what happens.",
    "Chapter ends when the player hears the door creaking sound from the second floor.",
]
initial="""
background: back_door
narration: 
Thanks to Mr.Dooley's information, you come to the house's back door. As you step into the overgrown backyard, a chill prickles your skin. The air, thick with decay, is broken only by the rustle of unseen creatures. Weeds claw at your ankles as you navigate the neglected garden. Behind the house, dense shrubbery twists in agony. A half-fallen tree, its trunk split and rotting, resembles a festering wound. The sight fills you with dread.

You push aside the tangled branches to reach the back door. You try to open the back door, but it's locked.

choices:
1. Try to pick the lock.
2. Check the windows.
3. Search for possible keys near the gate.
4. Throw a rock to break in.
"""

[[chapters]]
id="r2-0"
next="r3"
max_turns=15
backgrounds=[
    "front_door",
    "first_floor",
    "living_room",
    "study",
    "bathroom",
]
rules=[
    "There's an angry 'dog' on the first floor. As soon as player opens the front door, it will run towards you (need a 'normal' 'dodge' skill check). If player succeed in dodging, the black dog will run away. But if player fails at 'dodge' skill check, player will have to fight the dog.",
    "If player fire the 'shotgun', 'shotgun' will be removed from the items (remove 'shotgun' from items).",
    "If the dog dies, add a tag 'dead_dog'",
    "After player's fight with the dog, player can explore the first floor. The first floor has a living room, a study, a bathroom and a kitchen.",
    "In the living room, player can find Macario's family photo. They smile happily, which makes you hard to imagine why a lovely kid would suddenly kill his parents.",
    "In the bathroom, there's a mysterious sign on the mirror, three Yâ€™s arranged in a triangle and a staring eye in the middle. The moment you see it, you start to have a headache. A successful 'hard' 'occult' skill check will make player know it's related to Immortality.",
    "In the study, it is full of crucifixes and Madonnas. A successful 'normal' 'spot_hidden' skill check will help player find Mr. Corbitt's diary, in which records he was doing some crazy religious experiments. A successful 'normal' 'Latin' skill check helps player learn that the experiement is related to Immorality.",
    "In the kitchen, the water is dripping, but no matter how hard the player tightens the tap, it will not stop leaking.",
    "Player need to do skill check for at least 4 times in this chapter.",
    "In this chapter, player will not game over no matter what happens.",
    "Chapter ends when the player hears the door creaking sound from the second floor.",
]
initial="""
background: front_door
narration: 
You're standing in front of the house. The brick house stands wedged between two newer, taller office buildings, swallowed by their looming shadows. The modern facades starkly contrast the old house, making it seem like a relic from a forgotten time. Its weathered, cracked bricks are covered in grime, dulling their once vibrant color.

In spite of your experience, you still got shivered by what you have learnt about.

choices:
1. Go inside.
2. Peak through the window.
3. Walk around the house.
"""

[[chapters]]
id="r3"
next="r4"
max_turns=10
backgrounds=[
    "stairs",
    "kids_room",
    "main_bedroom",
    "spare_bedroom",
]
rules=[
    "The room inside is a kid's room. In the kid's room, player will find a drawing painted by the Macario kid. There's a monster inside with firing green eyes if player looks very hard (need a 'hard' 'spot hidden' skill check). ",

    "Second floor also has one main bedroom and one spare bedroom.",
    "In the main bedroom, there's a string of rosary beads and a worn prayer book on the bedside table. Evidence shows that the Porters once lived in this bedroom. ",
    "In the spare bedroom, player will find Mr. Corbitt lived this room.  Just as they begin to feel puzzled, a torrent of blood gushes from the floor or ceiling (needs a 'sanity' check). Then a'flying_bed' will fly to player and initiate a battle as soon as player enters.",  
    "Chapter ends when player finds the basement.",
]
initial="""
background: second_door
narration: 
The sound sends a shiver down your spine, echoing ominously in the stillness. Heart pounding, you follow the noise. The staircase is old and decrepit, each step groaning under your weight. The darkness is thick, and every creak sounds unnaturally loud in the oppressive gloom.

As you ascend, the air grows colder, and the sensation of being watched intensifies. The faint moonlight casts ghostly patterns on the walls. At the top, a long, narrow hallway stretches before you. A door stands slightly ajar, its edges swallowed by shadow. As you approach, the door swings open slowly, revealing a dark, foreboding room beyond.

choices:
1. Get inside the room.
2. Check the ajarred door. 
3. Go to other rooms.
"""

[[chapters]]
id="r4"
next=""
max_turns=10
backgrounds=[
    "stairs",
    "kids_room",
    "main_bedroom",
    "spare_bedroom",
]
rules=[
    "",
]
initial="""
background: basement
narration: 


choices:
1. Go to the main bedroom.
2. Go to the kids room.
3. Go to the spare bedroom.
"""